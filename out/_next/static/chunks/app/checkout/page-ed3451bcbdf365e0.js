(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{1503:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>n,Zp:()=>d,aR:()=>l});var a=t(7333),r=t(129),i=t(3842);let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});d.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});n.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},1837:(e,s,t)=>{Promise.resolve().then(t.bind(t,8059))},8059:(e,s,t)=>{"use strict";t.d(s,{default:()=>y});var a=t(7333),r=t(129),i=t(6683),d=t(5152),l=t(7098),n=t(3637),c=t(1503),o=t(6131),m=t(5385),h=t(8483),x=t(5569),u=t(4811),p=t(5581),j=t(4135),f=t(5011),N=t(4348);let g=(0,d.c)("pk_test_51R8OtvFQ3q0ElggxKxKlCh2KnJNiN8xFZ9PEawVZouApsIY8obKGthwAZFFPqTncOiYpbPpKwvagTNqWVfcfyC2d00qvO1rThC"),v=()=>{(0,l.useStripe)(),(0,l.useElements)();let e=(0,i.useRouter)(),{cart:s,clearCart:t}=(0,h._)(),{toast:d}=(0,x.dj)(),[u,p]=(0,r.useState)(!1),[g,v]=(0,r.useState)({email:"",firstName:"",lastName:"",address:{line1:"",line2:"",city:"",state:"",postal_code:"",country:"US"}}),y=(e,s)=>{if(e.startsWith("address.")){let t=e.split(".")[1];v(e=>({...e,address:{...e.address,[t]:s}}))}else v(t=>({...t,[e]:s}))},w=async t=>{if(t.preventDefault(),0===s.items.length){d({title:"Error",description:"Your cart is empty. Please add items before checking out.",variant:"destructive"}),e.push("/cart");return}p(!0);try{let e=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:s.items,customerInfo:g})});if(!e.ok)throw Error("Failed to create checkout session");let{url:t}=await e.json();if(t)window.location.href=t;else throw Error("No checkout URL received")}catch(e){d({title:"Payment Error",description:e instanceof Error?e.message:"An unexpected error occurred during checkout.",variant:"destructive"})}finally{p(!1)}};return((0,r.useEffect)(()=>{0===s.items.length&&e.push("/cart")},[s.items.length,e]),0===s.items.length)?null:(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-5 w-5"}),"Customer Information"]})}),(0,a.jsx)(c.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{htmlFor:"email",children:"Email Address *"}),(0,a.jsx)(o.p,{id:"email",type:"email",value:g.email,onChange:e=>y("email",e.target.value),required:!0,"data-testid":"email-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{htmlFor:"firstName",children:"First Name *"}),(0,a.jsx)(o.p,{id:"firstName",value:g.firstName,onChange:e=>y("firstName",e.target.value),required:!0,"data-testid":"first-name-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{htmlFor:"lastName",children:"Last Name *"}),(0,a.jsx)(o.p,{id:"lastName",value:g.lastName,onChange:e=>y("lastName",e.target.value),required:!0,"data-testid":"last-name-input"})]})]})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"Shipping Address"})}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{htmlFor:"address1",children:"Address Line 1 *"}),(0,a.jsx)(o.p,{id:"address1",value:g.address.line1,onChange:e=>y("address.line1",e.target.value),required:!0,"data-testid":"address-line1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{htmlFor:"address2",children:"Address Line 2"}),(0,a.jsx)(o.p,{id:"address2",value:g.address.line2||"",onChange:e=>y("address.line2",e.target.value)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{htmlFor:"city",children:"City *"}),(0,a.jsx)(o.p,{id:"city",value:g.address.city,onChange:e=>y("address.city",e.target.value),required:!0,"data-testid":"city-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{htmlFor:"state",children:"State *"}),(0,a.jsx)(o.p,{id:"state",value:g.address.state,onChange:e=>y("address.state",e.target.value),required:!0,"data-testid":"state-input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{htmlFor:"zip",children:"ZIP Code *"}),(0,a.jsx)(o.p,{id:"zip",value:g.address.postal_code,onChange:e=>y("address.postal_code",e.target.value),required:!0,"data-testid":"zip-input"})]})]})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"Order Summary"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[s.items.map(e=>(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{children:[e.productName," \xd7 ",e.quantity]}),(0,a.jsxs)("span",{children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)),(0,a.jsx)("div",{className:"border-t pt-2 mt-2",children:(0,a.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{"data-testid":"order-total",children:["$",s.subtotal.toFixed(2)]})]})})]})})]}),(0,a.jsx)(n.$,{type:"submit",disabled:u,className:"w-full",size:"lg","data-testid":"stripe-submit",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Proceed to Payment"]})}),(0,a.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Your payment information is secure and encrypted."})]})},y=()=>(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,a.jsx)(u.A,{}),(0,a.jsx)("main",{className:"flex-1 bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"container px-4 md:px-6 max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),(0,a.jsx)(l.Elements,{stripe:g,children:(0,a.jsx)(v,{})})]})}),(0,a.jsx)(p.A,{})]})}},e=>{var s=s=>e(e.s=s);e.O(0,[3885,9870,2698,2272,8596,424,9727,6284,3182,7358],()=>s(1837)),_N_E=e.O()}]);