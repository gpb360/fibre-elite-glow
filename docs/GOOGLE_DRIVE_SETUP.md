# üîê Google Drive MCP Setup Guide

This guide will help you obtain a refresh token for Google Drive API access using your OAuth credentials.

## üìã Prerequisites

1. **Google Cloud Project**: Your project "labellvie" should have the Google Drive API enabled
2. **OAuth Credentials**: You already have the client credentials (provided in your JSON file)
3. **Node.js**: Make sure Node.js is installed on your system

## üöÄ Quick Start

### Step 1: Run the OAuth Script

Execute the refresh token generator script:

```bash
node scripts/get-google-refresh-token.js
```

### Step 2: Authorize in Browser

1. The script will automatically open your browser
2. Sign in to your Google account
3. Grant permissions for Google Drive access
4. The browser will show a success message
5. Return to your terminal to see the tokens

### Step 3: Save Your Tokens

The script will automatically save your tokens to `google-drive-tokens.json` and display them in the terminal.

## üîë Your OAuth Credentials

The script uses these credentials from your provided JSON:

- **Client ID**: `953848423191-11p0lhjnl74k2119fm37s7qpv7rgv6nl.apps.googleusercontent.com`
- **Client Secret**: `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`
- **Project ID**: `labellvie`

## üéØ Required Scopes

The script requests these Google Drive scopes:

- `https://www.googleapis.com/auth/drive` - Full access to Google Drive
- `https://www.googleapis.com/auth/drive.file` - Access to files created by the app
- `https://www.googleapis.com/auth/drive.readonly` - Read-only access to Google Drive

## üîß Using with Google Drive MCP

Once you have your refresh token, you can use it with the Google Drive MCP server:

### Environment Variables

Add these to your `.env.local` file:

```bash
# Google Drive API Configuration
GOOGLE_DRIVE_CLIENT_ID=953848423191-11p0lhjnl74k2119fm37s7qpv7rgv6nl.apps.googleusercontent.com
GOOGLE_DRIVE_CLIENT_SECRET=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
GOOGLE_DRIVE_REFRESH_TOKEN=your_refresh_token_here
```

### MCP Server Configuration

If you're using the Google Drive MCP server, configure it with:

```bash
# Example MCP server command
npx @google-drive/mcp --refresh-token=$GOOGLE_DRIVE_REFRESH_TOKEN --client-id=$GOOGLE_DRIVE_CLIENT_ID --client-secret=$GOOGLE_DRIVE_CLIENT_SECRET
```

## üìÅ Generated Files

The script creates:

- `google-drive-tokens.json` - Contains all your OAuth tokens and credentials
- Console output with your refresh token and other details

## üîÑ Token Refresh

- **Access tokens** expire after 1 hour
- **Refresh tokens** are long-lived and can be used to get new access tokens
- The Google Drive MCP server will automatically handle token refresh

## üõ†Ô∏è Troubleshooting

### Common Issues

1. **"redirect_uri_mismatch" error**:
   - Make sure `http://localhost:3000/oauth/callback` is added to your OAuth client's authorized redirect URIs in Google Cloud Console

2. **"invalid_client" error**:
   - Verify your client ID and client secret are correct

3. **"access_denied" error**:
   - Make sure you grant all requested permissions during authorization

4. **Port 3000 already in use**:
   - Stop any other services running on port 3000, or modify the script to use a different port

### Google Cloud Console Setup

**IMPORTANT**: You need to add the redirect URI to your OAuth client:

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Select your "labellvie" project
3. Navigate to "APIs & Services" > "Credentials"
4. Find your OAuth 2.0 client ID: `953848423191-11p0lhjnl74k2119fm37s7qpv7rgv6nl.apps.googleusercontent.com`
5. Click "Edit" (pencil icon)
6. In "Authorized redirect URIs" section, click "ADD URI"
7. Add: `http://localhost:8080/oauth/callback`
8. Click "SAVE"

## üîê Security Notes

- Keep your `client_secret` and `refresh_token` secure
- Don't commit these tokens to version control
- Add `google-drive-tokens.json` to your `.gitignore` file
- Consider using environment variables for production

## üìö Next Steps

After obtaining your refresh token:

1. **Test the connection** with a simple Google Drive API call
2. **Integrate with your application** using the Google Drive API
3. **Set up the MCP server** for automated Google Drive operations
4. **Implement file upload/download** functionality in your app

## üÜò Need Help?

If you encounter issues:

1. Check the Google Cloud Console for API quotas and limits
2. Verify your OAuth client configuration
3. Ensure the Google Drive API is enabled for your project
4. Review the console output for specific error messages

---

**Generated by**: Google Drive OAuth Setup Script  
**Project**: La Belle Vie (La Belle Vie)  
**Date**: $(date)
